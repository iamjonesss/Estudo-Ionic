import{a as K,b as Q,c as E,d as X,e as w,f as P,h as Y,i as y,j as k,k as Z,l as tt,m as et,n as it,o as T,p as F,q as ot,r as j,t as $}from"./chunk-5NIHS2HS.js";import"./chunk-YTW3YOT3.js";import"./chunk-CVJJZ4YG.js";import"./chunk-Q25S7YOB.js";import"./chunk-IP3IRUG3.js";import"./chunk-KJX6OVVS.js";import"./chunk-HC6MZPB3.js";import"./chunk-HPO3ADYJ.js";import"./chunk-RMJ7PCZJ.js";import"./chunk-5S2DIWXE.js";import"./chunk-LEIMCQKJ.js";import"./chunk-DTF23OMH.js";import"./chunk-ZREJJZST.js";import"./chunk-GNOVVPTF.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-4KO2SR2V.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import{A as g,B as r,C as a,D as z,H as A,I as p,J,Ka as R,Na as G,Q as c,R as N,S as U,Sa as O,T as b,U as M,V as I,_ as v,ba as x,d as _,da as S,f as h,ia as q,j as V,k as B,q as d,r as m,t as C,x as f}from"./chunk-FV4MGWLY.js";import"./chunk-NXH66FBI.js";import"./chunk-DGOHYDZN.js";import"./chunk-JWALPVSZ.js";import"./chunk-BHFXHSCA.js";import"./chunk-LYYJ2XOB.js";import"./chunk-ZD3NZWAU.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import{a as H,b as L,f as W}from"./chunk-RW4GY4BD.js";var nt=(()=>{let i=class i{constructor(t){this.http=t,this.baseUrl="https://ionic-service.onrender.com/api"}listarCategorias(){return this.http.get(`${this.baseUrl}/categorias/`)}};i.\u0275fac=function(e){return new(e||i)(h(S))},i.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();function mt(n,i){if(n&1&&(r(0,"ion-select-option",6),c(1),a()),n&2){let u=i.$implicit;g("value",u.id),d(),U(" ",u.titulo_categoria," ")}}var rt=(()=>{let i=class i{constructor(t,e){this.modalCtrl=t,this.categoriaService=e,this.card=null,this.titulo_card="",this.descricao_card="",this.categoria_id=null,this.categorias=[]}ngOnInit(){this.card&&(this.titulo_card=this.card.titulo_card,this.descricao_card=this.card.descricao_card||"",this.categoria_id=this.card.categoria_id||null),this.categoriaService.listarCategorias().subscribe({next:t=>{this.categorias=t},error:t=>{console.error("Erro ao carregar categorias:",t)}})}salvar(){var o;let t=JSON.parse(localStorage.getItem("usuario")||"{}"),e={titulo_card:this.titulo_card,descricao_card:this.descricao_card,categoria_id:this.categoria_id,usuario_id:t.usuario_id};(o=this.card)!=null&&o.id&&(e.id=this.card.id),this.modalCtrl.dismiss(e)}cancelar(){this.modalCtrl.dismiss()}};i.\u0275fac=function(e){return new(e||i)(m(j),m(nt))},i.\u0275cmp=C({type:i,selectors:[["app-card-modal"]],inputs:{card:"card"},decls:22,vars:5,consts:[[1,"ion-padding"],["position","stacked"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["expand","block",3,"click"],["expand","block","fill","clear",3,"click"],[3,"value"]],template:function(e,o){e&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),c(3),a()()(),r(4,"ion-content",0)(5,"ion-item")(6,"ion-label",1),c(7,"T\xEDtulo"),a(),r(8,"ion-input",2),I("ngModelChange",function(s){return M(o.titulo_card,s)||(o.titulo_card=s),s}),a()(),r(9,"ion-item")(10,"ion-label",1),c(11,"Descri\xE7\xE3o"),a(),r(12,"ion-textarea",2),I("ngModelChange",function(s){return M(o.descricao_card,s)||(o.descricao_card=s),s}),a()(),r(13,"ion-item")(14,"ion-label",1),c(15,"Categoria"),a(),r(16,"ion-select",2),I("ngModelChange",function(s){return M(o.categoria_id,s)||(o.categoria_id=s),s}),f(17,mt,2,2,"ion-select-option",3),a()(),r(18,"ion-button",4),p("click",function(){return o.salvar()}),c(19,"Salvar"),a(),r(20,"ion-button",5),p("click",function(){return o.cancelar()}),c(21,"Cancelar"),a()()),e&2&&(d(3),U("",o.card?"Editar":"Novo"," Card"),d(5),b("ngModel",o.titulo_card),d(4),b("ngModel",o.descricao_card),d(4),b("ngModel",o.categoria_id),d(),g("ngForOf",o.categorias))},dependencies:[x,v,$,E,w,P,Y,y,k,tt,et,it,T,F,K,Q,O,R,G],encapsulation:2});let n=i;return n})();var at=(()=>{let i=class i{constructor(t){this.http=t,this.baseUrl="https://ionic-service.onrender.com/api/cards"}listarCards(t){return this.http.get(`${this.baseUrl}?usuario_id=${t}`)}criarCard(t){return this.http.post(`${this.baseUrl}`,t)}atualizarCard(t,e){return this.http.put(`${this.baseUrl}${t}`,e)}deletarCard(t){return this.http.delete(`${this.baseUrl}/${t}`)}relacionarComCategoria(t,e){return this.http.post(`${this.baseUrl}${t}/categorias/${e}`,{})}removerRelacionamento(t,e){return this.http.delete(`${this.baseUrl}${t}/categorias/${e}`)}};i.\u0275fac=function(e){return new(e||i)(h(S))},i.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();function pt(n,i){if(n&1){let u=A();r(0,"ion-item")(1,"ion-label")(2,"h2"),c(3),a(),r(4,"p"),c(5),a()(),r(6,"ion-button",4),p("click",function(){let e=V(u).$implicit,o=J();return B(o.confirmarExclusao(e.id))}),z(7,"img",5),a()()}if(n&2){let u=i.$implicit;d(3),N(u.titulo_card),d(2),N(u.descricao_card)}}var St=(()=>{let i=class i{constructor(t,e,o,l){this.modalCtrl=t,this.cardService=e,this.alertCtrl=o,this.router=l,this.cards=[]}abrirModalCard(){return W(this,null,function*(){let t=yield this.modalCtrl.create({component:rt});t.onDidDismiss().then(e=>{let o=e.data;o&&this.cardService.criarCard(L(H({},o),{usuario_id:JSON.parse(localStorage.getItem("usuario")||"{}").usuario_id})).subscribe({next:l=>{this.cards.push(l)},error:l=>console.error("Erro ao criar card:",l)})}),yield t.present()})}ionViewWillEnter(){this.carregarCards()}carregarCards(){let t=JSON.parse(localStorage.getItem("usuario")||"{}"),e=t==null?void 0:t.usuario_id;this.cardService.listarCards(e).subscribe({next:o=>{this.cards=o},error:o=>console.error("Erro ao carregar cards:",o)})}deletarCard(t){this.cardService.deletarCard(t).subscribe({next:()=>{this.cards=this.cards.filter(e=>e.id!==t)},error:e=>{console.error("Erro ao deletar card:",e)}})}confirmarExclusao(t){return W(this,null,function*(){yield(yield this.alertCtrl.create({header:"Confirmar Exclus\xE3o",message:"Voc\xEA tem certeza que quer excluir este card?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Excluir",handler:()=>this.deletarCard(t)}]})).present()})}logout(){localStorage.removeItem("usuario"),this.router.navigate(["/login"])}};i.\u0275fac=function(e){return new(e||i)(m(j),m(at),m(ot),m(q))},i.\u0275cmp=C({type:i,selectors:[["app-home"]],decls:12,vars:1,consts:[["slot","end"],[3,"click"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["fill","clear","color","danger","slot","end",3,"click"],["src","assets/icon/lixeira.svg","alt","Excluir",2,"width","20px","height","20px"]],template:function(e,o){e&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),c(3,"Meus Cards"),a(),r(4,"ion-buttons",0)(5,"ion-button",1),p("click",function(){return o.abrirModalCard()}),c(6,"Novo Card"),a(),r(7,"ion-button",1),p("click",function(){return o.logout()}),c(8,"Logout"),a()()()(),r(9,"ion-content",2)(10,"ion-list"),f(11,pt,8,2,"ion-item",3),a()()),e&2&&(d(11),g("ngForOf",o.cards))},dependencies:[x,v,$,E,X,w,P,y,k,Z,T,F,O],styles:["ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #002f6c, #003d99);padding:16px}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: #010b3d;--color: white;border-radius:12px;margin-bottom:12px;box-shadow:0 2px 8px #0003;padding:10px;align-items:center}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#fff;margin-bottom:4px}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#ccc}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--background: transparent;margin-left:auto}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}ion-toolbar[_ngcontent-%COMP%]{--background: #010b3d;--color: white;border-bottom:1px solid #002c63}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:700}ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{color:#fff}"]});let n=i;return n})();export{St as HomePage};
